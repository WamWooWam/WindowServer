<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='filer.js'></script>
    <script defer type="module" src='index.js'></script>
    <link rel="stylesheet" href="/styles/98.css">
</head>

<body>
    <div class="templates">
        <template id="x-window-template">
            <!-- TODO: prevent a roundtrip and inline the required CSS here -->
            <link id="style" rel="stylesheet" href="/styles/98.css">
            <div class="window window-template">
                <div class="title-bar">
                    <img class="title-bar-icon" src="" />
                    <span class="title-bar-text">
                        <slot name="title-bar-text"></slot>
                    </span>

                    <div class="title-bar-controls">
                        <button class="minimize-button" aria-label="Minimize" draggable="false"></button>
                        <button class="maximize-button" aria-label="Maximize" draggable="false"></button>
                        <button class="close-button" aria-label="Close" draggable="false"></button>
                    </div>
                </div>
                <div class="window-body">
                    <slot></slot>
                </div>
                <div class="status-bar">
                    <slot name="status-bar"></slot>
                </div>
            </div>
        </template>
        <template id="x-desktop-template">
            <style>
                :host {
                    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAARSURBVBhXY2Bg+A/EYMDwHwAMAgH/CWV5JQAAAABJRU5ErkJggg==);
                    background-repeat: repeat;
                    image-rendering: pixelated;
                    overflow: hidden;
                }
            </style>
            <slot></slot>
        </template>
    </div>

    <!-- TODO: this will eventually be a process -->
    <x-window id="task-manager" window-title="Task Manager" window-style="WS_CAPTION | WS_SYSMENU | WS_THICKFRAME | WS_ACTIVE | WS_VISIBLE"
        style="width: 300px; z-index: 9999999; position: absolute; right: 24px; bottom: 24px;">
        <div style="padding: 8px;">
            <div class="sunken-panel" style="height: 120px; width: 100%;">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>Process</th>
                            <th>ID</th>
                            <th>Owned Handles</th>
                        </tr>
                    </thead>
                    <tbody id="processes">

                    </tbody>
                </table>
            </div>
            <select id="launch-select" style="width: 100%; margin-top: 8px;">
                <option value="nchittest">WM_NCHITTEST Test Application</option>
            </select>
            <div style="display: flex; justify-content: flex-end; margin-top: 4px; gap: 8px;">
                <button id="spawn" style="flex:1;">Spawn</button>
                <button id="quit" style="flex:1;">Close</button>
                <button id="kill" style="flex:1;">End Task</button>
            </div>
        </div>
        <p slot="status-bar" class="status-bar-field" style="text-align: right;"><span
                id="count">0</span>&nbsp;Processes</p>
        <p slot="status-bar" class="status-bar-field" style="text-align: right;"><span
                id="handles">0</span>&nbsp;Handles</p>
    </x-window>
</body>

</html>